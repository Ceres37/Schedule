<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Teacher;
use App\Group;
use App\SubjectsTeacher;

class MainController extends Controller
{
    public function schedule()
    {
//        $json = "{\"1\":\"Якубовский Артем Николаевич\",\"3\":\"Безносова Ольга Юрьевна\",\"4\":\"Коробов Сергей \",\"5\":\"Петкевич Любовь Викторовна\",\"6\":\"Егоров  Вячеслав  Олегович\",\"7\":\"Задорожный Виктор Константинович\",\"8\":\"Константинов  Роман  Владимирович\",\"9\":\"Дивакова Таисия Петровна\",\"10\":\"Шатилова Елена Валентиновна\",\"11\":\"Филиппова Татьяна Филимоновна\",\"12\":\"Некипелова Альбина Сергеевна\",\"13\":\"Аршинская Ольга Борисовна\",\"14\":\"Егупова Анна Владимировна\",\"15\":\"Цивилева Мария Павловна\",\"16\":\"Быкова Светлана Николаевна\",\"17\":\"Антипина Ралия Карбангалиевна\",\"18\":\"Роднина Людмила Константиновна\",\"19\":\"Букова Ольга Михайловна\",\"20\":\"Субботин Дмитрий Юрьевич\",\"21\":\"Бурлак Елена Евгеньевна\",\"22\":\"Хабиев Мунир Абдулаевич\",\"23\":\"Умрихина Мария Ивановна\",\"24\":\"Максимова Реорита Петровна\",\"25\":\"Петрова Надежда Александровна\",\"26\":\"Сыровая Ирина Семеновна\",\"27\":\"Машукова Людмила Григорьевна\",\"28\":\"Чернигов Павел Николаевич\",\"29\":\"Чайковская Светлана Александровна\",\"30\":\"Игнатенко Марина Алексеевна\",\"31\":\"Борисова Ольга Васильевна\",\"32\":\"Минеева Людмила Михайловна\",\"33\":\"Сеченов Игорь Вячеславович\",\"34\":\"Вишневская Дарья Николаевна\",\"35\":\"Михлик Зоя Алексеевна\",\"36\":\"Кудрявцев Николай Васильевич\",\"37\":\"Широкова Наталья Владимировна\",\"38\":\"Буренко Аделия Алексеевна\",\"39\":\"Крутская Наталья Александровна\",\"40\":\"Бондаренко Ольга Андреевна\",\"41\":\"Желтов Константин Юрьевич\",\"42\":\"Иванов Дмитрий Николаевич\",\"43\":\"Ляшенко Вероника Владимировна\",\"45\":\"Кусакин Святослав Львович\",\"47\":\"Рыков Алексей Анатольевич\",\"48\":\"Ринчино Валентина Алексеевна\",\"49\":\"Антипов Леонид Александрович\",\"50\":\"Ларионова Елена Владимировна\",\"51\":\"Зайкова Евгения Петровна\",\"52\":\"Алексеева Ирина Сергеевна\",\"53\":\"Зайцева Лидия Александровна\",\"54\":\"Кривенцов Александр Егорович\",\"63\":\"Володин Иван Николаевич\",\"65\":\"Усовик Андрей Ольгердович\",\"71\":\"Кузнецова Наталья Александровна\",\"72\":\"Рыбаков Сергей Михайлович\",\"73\":\"Доронина Любовь Ивановна\",\"76\":\"Приемная комиссия \",\"77\":\"Перепияко Галина Васильевна\",\"78\":\"Абрамов Андрей Михайлович\",\"79\":\"Иван Иванов \",\"80\":\"Морозова Надежда Юрьевна\",\"81\":\"Тимофеева Марина Викторовна\",\"83\":\"Пашкевич Виктория Владиславовна\",\"84\":\"Черненок Александр Владиславович\",\"85\":\"Шекунов Евгений Александрович\",\"86\":\"Коробкова Елена Ананьевна\",\"87\":\"Степанов Сергей Леонидович\",\"88\":\"Павлов Анатлий Тимофеевич\",\"91\":\"Лебедева Анастасия Александровна\",\"93\":\"Беляева Анна Григорьевна\",\"94\":\"Ляшко Татьяна Сергеевна\",\"95\":\"Игнатьева Светлана Николаевна\",\"96\":\"Барсукова Надежда Константиновна\",\"97\":\"Вагенлейтнер Елена Александровна\",\"99\":\"Стешенко Александр Иванович\",\"101\":\"Коробкина Татьяна Григорьевна\",\"104\":\"Иноземцев Олег Владимирович\",\"105\":\"Малькова Полина Леонидовна\",\"107\":\"Лепетанов Николай Петрович\",\"108\":\"Субботина Наталья Юрьевна\",\"109\":\"Александров Владимир Николаевич\",\"122\":\"Кокшенев Игорь Валентинович\",\"133\":\"Ильин Анатолий Васильевич\",\"134\":\"Пыляева Нина Владимировна\",\"135\":\"Асалханов Александр Михайлович\",\"136\":\"Шабельникова Виктория Ивановна\",\"137\":\"Богачева Марина Александровна\",\"138\":\"Кондратенко Архип Эдуардович\",\"139\":\"Павлютенко Константин Иванович\",\"140\":\"Пролыгина Валерия Анатольевна\",\"141\":\"Еримеев Антон Михайлович\",\"142\":\"Кабанова Марина Анатольевна\",\"143\":\"Касьяненко Сергей Николаевич\",\"144\":\"Анохин Виталий Николаевич\",\"145\":\"Белова Алена Александровна\",\"146\":\"Баракова Ирина Сергеевна\",\"147\":\"Михайлов Святослав Александрович\",\"149\":\"Полищук Анастасия Викторовна\",\"150\":\"Иванова Анастасия Владимировна\",\"151\":\"Ивлева Алена Артёмовна\",\"152\":\"Семёнов Владислав Георгиевич\",\"153\":\"Хамаганов Анатолий Маратович\",\"154\":\"Игнатьев Василий Александрович\",\"155\":\"Пуляевская Александра Михайловна\",\"156\":\"Антонова Валентина Алексеевна\",\"157\":\"Яковлева Екатерина Александровна\",\"158\":\"Бобылева Анастасия Витальевна\",\"159\":\"Васьковский Роман Анатольевич\",\"160\":\"Романова Татьяна Владимировна\",\"164\":\"Власов Иван Никифорович\",\"165\":\"Пахомова Алла Федоровна\",\"166\":\"Часовитина Елена Сергеевна\",\"167\":\"Голобокова  Екатерина  Александровна\",\"168\":\"Акопян Анаит Дерениковна\",\"169\":\"Кубарская  Елена Фазлыевна\",\"170\":\"Попова  Анна Анатольевна\",\"171\":\"Крейн Татьяна Александровна\",\"172\":\"Кудрявцева Марина Анатольевна\",\"173\":\"Будина Ольга Анатольевна\",\"174\":\"Галкин  Николай Николаевич\",\"175\":\"Альховка  Сергей  Александрович\",\"176\":\"Жердев Максим Александрович\",\"177\":\"Уланова  Татьяна  Викторовна\",\"178\":\"Зимник Евгений  Валерьевич\",\"179\":\"Филипенкова  Надежда Александровна\",\"180\":\"Чемякина Евгения Владимировна\",\"181\":\"Амосова  Мария  Валерьевна\",\"182\":\"Бобовская  Александра Александровна\",\"183\":\"Главинская  Юлия  Сергеевна\",\"184\":\"Валегура Александр  Андреевич\",\"185\":\"Рычков  Александр Викторович\",\"186\":\"Богатеев Хамит Фаисрахманович\",\"187\":\"Булатников Борис Алексеевич\",\"188\":\"Кассир  \",\"189\":\"Секретарь Директора \",\"193\":\"Экономист  \",\"195\":\"Волков Виталий Борисович\",\"196\":\"Семичева Наталия Леонидовна\",\"197\":\"Уманец Антон Владимирович\",\"198\":\"Тухватуллина Алия Хамитовна\",\"199\":\"Сахаровский Александр \",\"200\":\"Колесников Алексей Владимирович\",\"201\":\"Ламыкина  \",\"202\":\"Дьяконов  Валерий  Михайлович\",\"203\":\"Евстигнеев Анатолий Сергеевич\",\"204\":\"Лихачев Андрей Александрович\",\"205\":\"Потапова  Анна Михайловна\",\"206\":\"Шаталов  Алексей  Владимирович\",\"207\":\"Зверев  Михаил  Валерьевич\",\"210\":\"Ахмадеева Алла Абдулваровна\",\"211\":\"Климова Марина Анатольевна\",\"213\":\"Охрана общежития вахтёр\",\"214\":\"Меринова Дарья Викторовна\",\"216\":\"Ермаков Михаил Алексеевич\",\"217\":\"Фролов Владимир  Сергеевич\",\"218\":\"  \",\"219\":\"Стрекалёв Вячеслав Олегович\",\"220\":\"Журавлёв Василий Иванович\",\"221\":\"Мелкоступов Николай Петрович\",\"222\":\"Карелина Надежда Анфиногентовна\",\"247\":\"Храмова Валентина Кузьминична\",\"249\":\"Чиняева Олеся Владимировна\",\"250\":\"Стош Андрей Павлович\",\"251\":\"Митюкова Наталья Витальевна\",\"252\":\"Шестаков Сергей Алексеевич\",\"253\":\"Кошкарева Галина Николаевна\",\"254\":\"Соловьева Елена Александровна\",\"255\":\"Кашина  Марина  Владимировна\",\"256\":\"Котова Анна Владимировна\",\"257\":\"Татарников Андрей Михайлович\",\"258\":\"Охрана техникума вахтёр\",\"260\":\"Катана Ксения Вячеславовна\",\"261\":\"Петрова Анна Дмитриевна\",\"262\":\"Жданкина Ольга  Витальевна\",\"263\":\"Фатеев  Никита Константинович\",\"264\":\"Пушмынцев  Сергей Александрович\",\"265\":\"Пашаев Денис Сохрабович\",\"266\":\"Цыганков  Никита  Алексеевич\",\"267\":\"Карсаков  Андрей  Иванович\",\"268\":\"Потапов  Александр Михайлович\",\"269\":\"Налетова Ольга  Алексеевна\",\"270\":\"Сенотрусова Наталия Александровна\",\"271\":\"Томуталов  Эдуард  Анатольевич\",\"272\":\"Филичкин Александр Анатольевич\",\"274\":\"Коленко Павел Федорович\",\"275\":\"Беспалова Любовь Владимировна\",\"276\":\"Базюк Виталий Викторович\",\"277\":\"Петрова Нина Николаевна\",\"279\":\"Алексеев Евгений Викторович\",\"280\":\"Мажуга Ксения Дмитриевна\",\"281\":\"Алагуева Римма Протасовна\",\"282\":\"Баширов Владислав Наильевич\",\"283\":\"Антонюк Глеб Родионович\",\"284\":\"Быкова Ирина Ивановна\",\"285\":\"Беспалова Елена Николаевна\",\"286\":\"Берестова Светлана Викторовна\",\"287\":\"Волошенко Галина Михайловна\",\"288\":\"Воркулева Рима Дмитриевна\",\"289\":\"Волков Сергей Алексеевич\",\"290\":\"Габдулина Нелли Альбертовна\",\"291\":\"Гладких Дмитрий Олегович\",\"292\":\"Жалилова Мускайым Каримовна\",\"293\":\"Есютина Светлана Николаевна\",\"295\":\"Данчук Наталья Юрьевна\",\"296\":\"Дырочко Татьяна Владимировна\",\"297\":\"Ерох Марат Александрович\",\"298\":\"Имомов Тимур Абдуджабборович\",\"299\":\"Гайворонская Валентина Павловна\",\"300\":\"Зорин Сергей Викторович\",\"301\":\"Касьянова Людмила Васильевна\",\"302\":\"Коробов Сергей Сергеевич\",\"303\":\"Корнилов Александр Сергеевич\",\"304\":\"Кобелев Николай Николаевич\",\"305\":\"Кузнецова Ольга Александровна\",\"306\":\"Лавренюк Александр Иванович\",\"307\":\"Мангушев Никита Евгеньевич\",\"309\":\"Мамедов Руслан Раззаг оглы\",\"310\":\"Михайлов Александр Александрович\",\"312\":\"Миюкова Наталья Витальевна\",\"313\":\"Ламыкина Валентина Валерьевна\",\"314\":\"Онищук Владимир Николаевич\",\"315\":\"Сахаровский Александр Александрович\",\"316\":\"Разумов Вячеслав Витальевич\",\"317\":\"Радионов Александр Владимирович\",\"318\":\"Раева Гульсара Акимовна\",\"320\":\"Алексеева Екатерина Станиславовна\",\"321\":\"Непомнящих Людмила Степановна\",\"322\":\"Петров Сергей Евгеньевич\",\"323\":\"Попенок Валерия Борисовна\",\"324\":\"Бессмертная Ирина Сергеевна\",\"325\":\"Иванова Екатерина Фридриховна\",\"328\":\"Фадеева Елена Анатольевна\",\"329\":\"Тупас Юрий Викторович\",\"330\":\"Сигидюк Надежда Ивановна\",\"332\":\"Филиппова Валентина Филимоновна\",\"333\":\"Чумак Татьяна Ринатовна\",\"334\":\"Шушковский Кирилл Андреевич\",\"335\":\"Шпедт Людмила Дмитриевна\",\"336\":\"Чупрыгина Наталья Павловна\",\"337\":\"Чумак Алёна Юрьевна\",\"339\":\"Чугунова Светлана Александровна\",\"340\":\"Шевелев Леонид Георгиевич\",\"341\":\"Лезин Олег Алексеевич\",\"342\":\"Кудрявцев Вячеслав Олегович\",\"343\":\"Казанцев Александр Владимирович\",\"344\":\"Моисеев Алексей Анатольевич\",\"345\":\"Богданов Илья Владимирович\",\"346\":\"Бусько Михаил Михайлович\",\"347\":\"Крючкин Александр Владимирович\",\"348\":\"Игнатьев Константин Александрович\",\"349\":\"Федотов Сергей Витальевич\",\"350\":\"Шестакова Светлана Виктровна\",\"351\":\"Смороднов Иван Викторович\",\"352\":\"Терещенко Александр Дмитриевич\",\"353\":\"Даниленко Алексей Васильевич\",\"354\":\"Смороднова Татьяна Николаевна\",\"355\":\"Пинигина Людмила Анатольевна\",\"356\":\"Хадкевич Виктор Игоревич\",\"357\":\"Анаркулова Элмира Нуракбековна\",\"358\":\"Никитенко Владимир Леонидович\",\"359\":\"Науменко Евгения Юрьевна\",\"361\":\"Хулугурова Инна Ивановна\",\"363\":\"Бодякина Татьяна Владимировна\",\"364\":\"Садовников Федор Викторович\",\"365\":\"Гордиенко Александра Павловна\",\"366\":\"Филимонова Ольга Николаевна\",\"367\":\"Доронин Никита Максимович\",\"368\":\"Болотова Калерия Павловна\",\"370\":\"Яппарова Регина Сергеевна\",\"371\":\"Акулов Олег Владимирович\",\"372\":\"Бикбова Софья Григорьевна\",\"373\":\"Кардополова Евгения Алексеевна\",\"374\":\"Борбак-Оол Айрана Анатольена\",\"375\":\"Матвеева Анна Николаевна\",\"376\":\"Корнилов Юрий Игоревич\",\"377\":\"Ченских Наталья Сергеевна\",\"378\":\"Тюремов Евгений Викторович\",\"380\":\"Пидгирнер Никита Владимирович\",\"381\":\"Елтошкина Евгения Валерьевна\",\"382\":\"Семушев Андрей Анатольевич\",\"383\":\"Орлов Александр Владиславович\",\"384\":\"Будин Игорь Леонидович\",\"385\":\"Асеев Никита Сергеевич\",\"386\":\"Миронова Тамара Петровна\",\"387\":\"Горин Данил Сергеевич\",\"389\":\"Дурнова Людмила Геннадьевна\",\"390\":\"Бердибеков Жанболот Акжигитович\",\"391\":\"Жалилова Акылай Каримовна\",\"393\":\"Кулакова Ольга Васильевна\",\"394\":\"Филимонова Вера Иннокентьевна\",\"396\":\"Валиулин Мавлют Мингалеевич\",\"397\":\"Романов Александр Дмитриевич\",\"398\":\"Гундарев Максим Андреевич\",\"399\":\"Ветлужский Никита Юрьевич\",\"400\":\"Зорина Мария Ивановна\",\"401\":\"Габидулин Игорь Искандарович\",\"402\":\"Тюрин Василий Алексеевич\",\"403\":\"Акматова Майрамкан Маматдадыровна\",\"404\":\"Яскина Полина Сергеевна\",\"405\":\"Лаврентьева Мария Вячеславовна\",\"406\":\"Курбатова Надежда Юрьевна\",\"407\":\"Ярославцев Александр Владимирович\",\"408\":\"Замятина Наталья Викторовна\",\"409\":\"Акматали кызы Датка Айым\",\"410\":\"Наумов Денис Анатольевич\",\"411\":\"Чуприков Сергей Владимирович\",\"412\":\"Шевелева Таисия Владимировна\",\"414\":\"Бурдина Наталия Геннадьевна\",\"415\":\"Костыря Иван Александрович\",\"416\":\"Удальцов Сергей Александрович\",\"417\":\"Садовский Сергей Николаевич\",\"423\":\"Верхотурова Анастасия Михайловна\",\"424\":\"Пидгурская Екатерина Александровна\",\"425\":\"Иванова Наталья Викторовна\",\"427\":\"Нефедова Лариса Викторовна\",\"428\":\"Шлыкова Татьяна Викторовна\",\"429\":\"Байкова Наталья Анатольевна\",\"430\":\"Хромовских Юрий Юрьевич\",\"431\":\"Смолянинов Дмитрий Андреевич\",\"432\":\"Жданкин Евгений Валерьевич\",\"434\":\"Кузнецова Елена Романовна\",\"435\":\"Коляденко Алёна Владимировна\",\"436\":\"Кончилов Виктор Васильевич\",\"437\":\"Беспрозванных Олег Анатольевич\",\"438\":\"Анисимова Елизавета Игоревна\",\"439\":\"Нестеренко Василий Владимирович\",\"440\":\"Сабиров Анатолий Валерьевич\",\"441\":\"Жданкина Ольга Витальевна\",\"442\":\"Трубникова Любовь Николаевна\",\"447\":\"Бондарева Алеся Игоревна\",\"452\":\"Лузгина Марина Анатольевна\",\"454\":\"Наумова Александра Сергеевна\",\"463\":\"Швец Екатерина Владимировна\",\"465\":\"Самойленко Олег Викторович\",\"466\":\"Пидгурский Сергей Николаевич\"}";
//        $teachers = json_decode($json);
        $teachers = Teacher::all('id_teacher','name');
//      $teachers = Teacher::all('id_teacher', 'name');
        return view('schedule', ['teachers' => $teachers]);
    }

    public function showTable(Request $request)
    {
        $id = $request->get('id', null);
        $query = (new Group())->newQuery();
        $query = $query->where('course', '=', "$id");
        $groups = [];
        foreach ($query->get() as $row) {
            $groups[$row['id_group']] = $row;
            $groups[$row['id_group']]['subjects']=new \stdClass();
        }

        return (['status' => true, 'groups' => $groups]);
    }

    public function getSubject(Request $request)
    {
        $id = $request->get('id',null);
        $query = (new SubjectsTeacher())->newQuery();
        $query = $query->where('teacher','=',"$id");
        return(['status'=>true,'subjects'=>$query->get(),'id'=>$id]);
    }
}
